# Container Management Dashboard - Documentation

**Generated from Figma Design ID: 2615-204489**

## Overview

The Container Management Dashboard is a comprehensive React page component that provides a centralized interface for managing and monitoring vertical farming containers. It serves as the main landing page for the application and implements the complete Figma design with pixel-perfect accuracy.

## Component Architecture

### Main Component: `ContainerManagement.tsx`

**Location**: `src/features/ContainerManagement/ContainerManagement.tsx`

**Description**: Primary dashboard component that orchestrates the entire container management interface.

### Key Features

1. **Search & Filtering**
   - Real-time text search with debouncing (500ms)
   - Multi-criteria filtering: Type, Tenant, Purpose, Status, Alerts
   - Clear filters functionality
   - Dynamic filter options loaded from API

2. **Performance Overview**
   - Interactive time range selection (Week, Month, Quarter, Year)
   - Dual statistics cards for Physical and Virtual containers
   - Click-to-filter functionality on container type cards
   - Real-time metrics with Chart.js visualizations

3. **Container Management**
   - Comprehensive container list with sorting and pagination
   - CRUD operations: Create, Read, Update, Delete
   - Container actions: View, Edit, Shutdown
   - Status indicators and alert badges

4. **Real-time Updates**
   - Automatic data refresh on operations
   - Optimistic UI updates
   - Error handling with user feedback

## Component Dependencies

### Reused Components (100% Coverage)

All UI components are reused from the existing component library:

- **Header**: Application header with user avatar and navigation
- **SearchFilters**: Complete search and filter controls
- **ContainerStatistics**: Performance overview cards with charts
- **ContainerTable**: Full-featured data table with actions
- **CreateContainerPanel**: Slide-in form for container creation
- **EditContainerPanel**: Slide-in form for container editing
- **Material-UI**: Core UI framework for layout and styling

### API Integration

**Primary Service**: `containerApiService.ts`

**Key API Methods**:
- `listContainers()` - Fetch containers with filtering/pagination
- `getPerformanceMetrics()` - Fetch performance data for charts
- `getFilterOptions()` - Fetch filter dropdown options
- `createContainer()` - Create new containers
- `updateContainer()` - Update existing containers
- `shutdownContainer()` - Deactivate containers

## State Management

### Local State (React Hooks)

- **Search & Filters**: Debounced search terms and filter criteria
- **Data State**: Containers list, performance metrics, filter options
- **UI State**: Loading states, error messages, panel visibility
- **Pagination**: Current page, total pages, page size

### Data Flow

1. **Initial Load**: Filter options → Performance metrics → Container list
2. **User Interactions**: Search/filter changes → Debounced API calls → State updates
3. **CRUD Operations**: Form submissions → API calls → Data refresh → UI updates

## Performance Optimizations

1. **Debounced Search**: 500ms delay to prevent excessive API calls
2. **useCallback Hooks**: Memoized event handlers to prevent unnecessary re-renders
3. **Data Transformation**: Client-side mapping between API and component formats
4. **Efficient Updates**: Targeted data refreshes after operations

## Type Safety

### Type Mapping

The component handles type compatibility between:
- **New API Types**: `Container` from `src/types/container.ts`
- **Legacy Component Types**: `Container` from `src/shared/types/containers.ts`

**Transformation Function**: `transformToLegacyContainer()` maps between type systems.

### Key Interfaces

```typescript
// Filter state management
interface ContainerFilterCriteria {
  search?: string;
  type?: 'physical' | 'virtual';
  tenant?: number;
  purpose?: 'development' | 'research' | 'production';
  status?: 'created' | 'active' | 'maintenance' | 'inactive';
  alerts?: boolean;
  page?: number;
  limit?: number;
}

// Performance metrics data
interface PerformanceMetrics {
  physical: ContainerTypeMetrics;
  virtual: ContainerTypeMetrics;
  time_range: TimeRange;
  generated_at: string;
}
```

## Routing Integration

**Route**: `/containers`
**Router**: `src/router/AppRouter.tsx`

```typescript
<Route path="/containers" element={
  <ProtectedRoute>
    <ContainerManagement />
  </ProtectedRoute>
} />
```

## Responsive Design

The component implements responsive design principles:

- **Grid Layout**: Material-UI Grid system for flexible layouts
- **Breakpoints**: Responsive behavior at sm/md/lg/xl breakpoints
- **Mobile Optimization**: Touch-friendly interactions and responsive tables
- **Card Layout**: Statistics cards adapt to screen size

## Error Handling

### User-Facing Errors
- API connection failures
- Container operation errors
- Data loading timeouts

### Error Display
- Alert components for user notifications
- Loading states during operations
- Graceful degradation for missing data

## Future Enhancements

1. **Real-time Updates**: WebSocket integration for live data
2. **Advanced Filtering**: Date range filters, custom queries
3. **Bulk Operations**: Multi-select and batch actions
4. **Export Functionality**: CSV/PDF export of container data
5. **Dashboard Customization**: User-configurable widgets

## Development Notes

### Custom Hooks Created
- `useDebounce`: Generic debouncing hook for search optimization

### Component Pattern
- Functional components with hooks
- Composition over inheritance
- Single responsibility principle
- Consistent error boundaries

### Performance Considerations
- Memoized callbacks prevent unnecessary re-renders
- Debounced search reduces API load
- Efficient data transformation
- Optimistic UI updates

## Testing Strategy

### Recommended Tests
1. **Unit Tests**: Component rendering, state management, data transformations
2. **Integration Tests**: API integration, user workflows
3. **E2E Tests**: Complete user journeys, CRUD operations
4. **Performance Tests**: Load testing, render performance

### Test Data
- Mock API responses for consistent testing
- Realistic container data scenarios
- Edge cases (empty states, errors)

## Security Considerations

1. **Authentication**: JWT token-based authentication
2. **Authorization**: Role-based access control
3. **Input Validation**: Client and server-side validation
4. **XSS Prevention**: Proper data sanitization
5. **CSRF Protection**: Token-based request validation

---

**Generated**: `npm run build` ✅ **Passed**  
**ESLint**: No errors in new components  
**TypeScript**: Full type safety implemented  
**Responsive**: Mobile-first design approach  
**API Integration**: Complete backend connectivity