import React from 'react';
import { Box, Typography, Container } from '@mui/material';
import { GenerationBlock } from '../../../shared/components/GenerationBlock';
import { DotStatus } from '../../../shared/components/GenerationBlock/types';

// Helper function to generate mock grid data
const generateGridData = (
  filledRows: number = 20,
  warningRows: number = 3,
  emptyRows: number = 13
) => {
  const rows: DotStatus[][] = [];
  
  // Generate filled rows (ok)
  for (let i = 0; i < filledRows; i++) {
    const row: DotStatus[] = [];
    for (let j = 0; j < 10; j++) {
      row.push(i % 3 === 0 && j % 3 === 0 ? 'smallOk' : 'ok');
    }
    rows.push(row);
  }
  
  // Generate warning rows
  for (let i = 0; i < warningRows; i++) {
    const row: DotStatus[] = [];
    for (let j = 0; j < 10; j++) {
      row.push(j % 2 === 0 ? 'warning' : 'ok');
    }
    rows.push(row);
  }
  
  // Generate empty rows
  for (let i = 0; i < emptyRows; i++) {
    const row: DotStatus[] = [];
    for (let j = 0; j < 10; j++) {
      row.push('empty');
    }
    rows.push(row);
  }
  
  return { rows };
};

const GenerationBlockDemo: React.FC = () => {
  const defaultGridData = generateGridData(20, 3, 13);
  const highFillGridData = generateGridData(30, 2, 4);
  const lowFillGridData = generateGridData(10, 0, 26);
  const manyWarningsGridData = generateGridData(10, 10, 16);

  return (
    <Container maxWidth="lg" sx={{ py: 4 }}>
      <Typography variant="h4" gutterBottom>
        Generation Block Component Demo
      </Typography>
      
      <Typography variant="h6" sx={{ mt: 3, mb: 2 }}>
        Different Generation Block Variants
      </Typography>
      
      <Box sx={{ 
        display: 'flex', 
        flexWrap: 'wrap', 
        gap: 4, 
        justifyContent: 'center',
        mb: 4
      }}>
        <Box>
          <Typography variant="subtitle1" align="center" gutterBottom>
            Default (75% Fill)
          </Typography>
          <GenerationBlock
            trayId="TR-15199256"
            fillPercentage={75}
            slotId={4}
            gridSize="10x20 Grid"
            cropCount={170}
            gridData={defaultGridData}
          />
        </Box>
        
        <Box>
          <Typography variant="subtitle1" align="center" gutterBottom>
            High Fill (95%)
          </Typography>
          <GenerationBlock
            trayId="TR-15199256"
            fillPercentage={95}
            slotId={4}
            gridSize="10x20 Grid"
            cropCount={190}
            gridData={highFillGridData}
          />
        </Box>
        
        <Box>
          <Typography variant="subtitle1" align="center" gutterBottom>
            Low Fill (25%)
          </Typography>
          <GenerationBlock
            trayId="TR-15199256"
            fillPercentage={25}
            slotId={4}
            gridSize="10x20 Grid"
            cropCount={50}
            gridData={lowFillGridData}
          />
        </Box>
        
        <Box>
          <Typography variant="subtitle1" align="center" gutterBottom>
            Many Warnings
          </Typography>
          <GenerationBlock
            trayId="TR-15199256"
            fillPercentage={60}
            slotId={4}
            gridSize="10x20 Grid"
            cropCount={120}
            gridData={manyWarningsGridData}
          />
        </Box>
      </Box>
    </Container>
  );
};

export default GenerationBlockDemo;