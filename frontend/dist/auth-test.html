<html>
<head><title>Auth Test</title></head>
<body>
<h1>Auth Test</h1>
<div id='status'>Testing...</div>
<div id='result'></div>
<script>
async function testAuth() {
  const status = document.getElementById('status');
  const result = document.getElementById('result');
  
  try {
    // First, login
    const formData = new URLSearchParams();
    formData.append('username', 'testuser');
    formData.append('password', 'testpassword');
    
    const loginResponse = await fetch('/api/v1/auth/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
      body: formData
    });
    
    if (!loginResponse.ok) {
      throw new Error('Login failed: ' + loginResponse.status);
    }
    
    const loginData = await loginResponse.json();
    status.innerHTML = 'Login successful! Token: ' + loginData.access_token.substring(0, 20) + '...';
    
    // Now test API call
    const apiResponse = await fetch('/api/v1/containers/filter-options', {
      headers: { 'Authorization': 'Bearer ' + loginData.access_token }
    });
    
    if (!apiResponse.ok) {
      throw new Error('API call failed: ' + apiResponse.status);
    }
    
    const apiData = await apiResponse.json();
    result.innerHTML = '<h2>API Success!</h2><pre>' + JSON.stringify(apiData, null, 2) + '</pre>';
  } catch (error) {
    result.innerHTML = '<h2>Error:</h2><pre>' + error.message + '</pre>';
  }
}

testAuth();
</script>
</body>
</html>